\NeedsTeXFormat{LaTeX2e}\ProvidesClass{iitletterProf}[2025/10/29 v2.2 Illinois Tech letter class (Prof, autobio + biblatex + color fixes)]% -----------------------------------------------------------------------------% Version History% -----------------------------------------------------------------------------% v2.2 (2025/10/29)%   • Integrated biblatex authoryear support directly into class%   • Added full-color citations (author, year, parentheses) via citecolormix%   • Moved autobio to appear before \end{letter}, allowing same-page placement%% v2.1.0 (2025/10/10)%   • Stable baseline: autobio feature, fixed header/footer, color/hyperref defaults%   • Uses dvipsnames xcolor, accent color iitred, and consistent hyperref setup%% Earlier versions%   • Internal experimental iterations (pre-2.0) prior to IIT letter standardization% -----------------------------------------------------------------------------% --- Essentials --------------------------------------------------------------\RequirePackage{kvoptions}\RequirePackage{ifthen}\RequirePackage{graphicx}\RequirePackage[dvipsnames]{xcolor} % dvipsnames per request\RequirePackage{xspace}\RequirePackage{etoolbox}\RequirePackage{amsmath,amssymb}    % folded in per request\RequirePackage{hyperref}           % folded in per request\RequirePackage[	backend=biber,	style=authoryear,	sorting=nyt,	maxbibnames=99,	doi=false,	isbn=false,	url=false]{biblatex}% --- kvoptions keys ----------------------------------------------------------\SetupKeyvalOptions{family=iit, prefix=iit@}% Header/identity keys\DeclareStringOption[iitlogo]{logofile}\DeclareStringOption[ILTECH_red_horiz_tight.pdf]{logopath}\DeclareStringOption[0.40\textwidth]{logowidth}\DeclareStringOption[10 West 32${}^{\textup{nd}}$ Street \redvert\ RE 208 \redvert\ Chicago, IL 60616 USA \redvert\ +1.312.567.8983 \redvert\ hickernell@iit.edu]{contact}\DeclareStringOption[Fred J. Hickernell]{name}\DeclareStringOption[Professor of Applied Mathematics]{title}\DeclareStringOption[\today]{datedefault}\definecolor{iitred}{RGB}{148,0,24} % Illinois Tech crimson\DeclareStringOption[iitred]{accent}\DeclareStringOption[{\small\raggedleft\textsf{\textbf{\iit@name} \\ \iit@title}}]{rightheader}\DeclareStringOption[1pt]{headrule}\DeclareStringOption[2.5cm]{headheight}\DeclareStringOption[55pt]{headsep}\DeclareStringOption[20pt]{footraise}% Bio keys\DeclareBoolOption[false]{autobio}\DeclareStringOption[]{bio}\DeclareStringOption[]{bioheading}\DeclareStringOption[]{biofontcmd}% Hyperref color keys (defaults mirror your snippet)\DeclareBoolOption[true]{colorlinks}\DeclareStringOption[violet]{linkcolor}\DeclareStringOption[Aquamarine]{citecolor}\DeclareStringOption[YellowOrange]{urlcolor}\DeclareStringOption[70]{shadescale}\DeclareBoolOption[true]{hypersetup} % allow disabling with 'nohypersetup'% Process kvoptions now (creates \iit@... macros)\ProcessKeyvalOptions*% --- Classic LaTeX options layer --------------------------------------------\DeclareOption{autobio}{\setkeys{iit}{autobio=true}}\DeclareOption{noautobio}{\setkeys{iit}{autobio=false}}\DeclareOption{hypersetup}{\setkeys{iit}{hypersetup=true}}\DeclareOption{nohypersetup}{\setkeys{iit}{hypersetup=false}}% Pass any other unknown options (10pt/11pt/12pt, etc.) to 'letter'\DeclareOption*{\PassOptionsToClass{\CurrentOption}{letter}}\ProcessOptions\relax% Load base class AFTER options handled\LoadClass{letter}% --- Page layout -------------------------------------------------------------\setlength{\textwidth}{170mm}\setlength{\oddsidemargin}{0mm}\setlength{\topmargin}{-15mm}% --- Helpers -----------------------------------------------------------------\providecommand{\HickernellFJ}{Hickernell\xspace}\newcommand{\redvert}{${\color{\iit@accent}\vert}$\xspace}% Fixed fonts carried over\DeclareFixedFont{\xsf}{OT1}{cmss}{m}{n}{10}\DeclareFixedFont{\xiirm}{OT1}{cmr}{m}{n}{12}\DeclareFixedFont{\xiisl}{OT1}{cmr}{m}{sl}{12}\newfont{\xbx}{cmssbx10 scaled 2074}\newfont{\xiisf}{cmss12 scaled 1440}% --- Header/foot boxes -------------------------------------------------------\newsavebox{\IITHEAD}\newsavebox{\IITRightBox}\newsavebox{\FirmHead}\newsavebox{\FirmFoot}% Quick logo swap:\newcommand{\iitsetupsimplelogo}[2]{%	\makeatletter	\renewcommand{\iit@logopath}{#1}%	\renewcommand{\iit@logowidth}{#2}%	\makeatother}% Build initial boxes\makeatletter\sbox{\IITHEAD}{%	\parbox[t]{0.64\textwidth}{%		\includegraphics[width=\iit@logowidth]{\iit@logopath}%	}%}\sbox{\IITRightBox}{%	\parbox[t]{0.33\textwidth}{%		\raggedleft		\textsf{\small\textbf{\iit@name}}\\[-.15ex]%		\textsf{\small \iit@title}%	}%}\sbox{\FirmHead}{%	\parbox{\textwidth}{%		\usebox{\IITHEAD}\hfill\raisebox{3.2ex}{\usebox{\IITRightBox}}\\[3pt]%		\color{\iit@accent}\rule{\textwidth}{\iit@headrule}%	}%}\sbox{\FirmFoot}{%	\parbox{\textwidth}{\centering		{\footnotesize \textsf{\iit@contact}}%	}%}\makeatother% --- Page styles -------------------------------------------------------------\makeatletter\renewcommand{\ps@firstpage}{%	\setlength{\headheight}{\iit@headheight}%	\setlength{\headsep}{\iit@headsep}%	\renewcommand{\@oddhead}{\usebox{\FirmHead}}%	\renewcommand{\@oddfoot}{\raisebox{-\iit@footraise}[0pt]{\usebox{\FirmFoot}}}%	\renewcommand{\@evenhead}{}%	\renewcommand{\@evenfoot}{}%}\renewcommand{\ps@headings}{%	\setlength{\headheight}{\iit@headheight}%	\setlength{\headsep}{\dimexpr \iit@headsep - 15pt\relax}%	\renewcommand{\@oddhead}{}%	\renewcommand{\@oddfoot}{}%	\renewcommand{\@evenhead}{}%	\renewcommand{\@evenfoot}{}%}\providecommand{\@evenhead}{}\providecommand{\@oddhead}{}%\providecommand{\@evenfoot}{}\providecommand{\@oddfoot}{}%\makeatother\thispagestyle{headings}% --- Opening (preserved) -----------------------------------------------------\makeatletter\renewcommand*{\opening}[1]{%	\ifx\@empty\fromaddress	\thispagestyle{firstpage}%	{\raggedleft\@date\par}%	\else	\thispagestyle{firstpage}%	{\raggedleft\begin{tabular}{l@{}}%			\ignorespaces \fromaddress \\*[2\parskip] \@date%		\end{tabular}\par}%	\fi	\vspace{2\parskip}%	{\raggedright \toname \\ \toaddress \par}%	\vspace{2\parskip}%	#1\par\nobreak}\makeatother% --- Simple bibliography environment ----------------------------------------\makeatletter\newenvironment{thebibliography}[1]{\list{\@biblabel{\@arabic\c@enumiv}}%	{\settowidth\labelwidth{\@biblabel{#1}}%		\leftmargin\labelwidth		\advance\leftmargin\labelsep		\usecounter{enumiv}%		\let\p@enumiv\@empty		\renewcommand\theenumiv{\@arabic\c@enumiv}}%	\sloppy	\clubpenalty4000	\@clubpenalty \clubpenalty	\widowpenalty4000%	\sfcode`\.\@m}{\def\@noitemerr{\@latex@warning{Empty `thebibliography' environment}}%	\endlist}\newcommand\newblock{\hskip .11em\@plus.33em\@minus.07em}\makeatother% --- Public setup command ----------------------------------------------------\newcommand{\iitsetup}[1]{%	\makeatletter	\setkeys{iit}{#1}%	% Per-letter bio override via key:	\ifx\iit@bio\@empty\else	\expandafter\renewcommand\expandafter{\csname iitBioContent\endcsname}{\iit@bio}%	\fi	% Rebuild header/foot boxes:	\sbox{\IITHEAD}{\parbox[t]{0.64\textwidth}{%			\includegraphics[width=\iit@logowidth]{\iit@logopath}}}%	\sbox{\IITRightBox}{\parbox[t]{0.33\textwidth}{%			\raggedleft \textsf{\small \textbf{\iit@name}}\\[-.15ex]%			\textsf{\small \iit@title}}}%	\sbox{\FirmHead}{\parbox{\textwidth}{%			\usebox{\IITHEAD}\hfill\raisebox{3.2ex}{\usebox{\IITRightBox}}\\[3pt]%			\color{\iit@accent}\rule{\textwidth}{\iit@headrule}}}%	\sbox{\FirmFoot}{\parbox{\textwidth}{\centering			{\footnotesize \textsf{\iit@contact}}}}%	\makeatother}% --- Date default if user doesn’t set \date ----------------------------------\makeatletter\AtBeginDocument{%	\ifx\@date\@empty	\date{\iit@datedefault}%	\fi}\makeatother% --- Bio feature -------------------------------------------------------------\newcommand{\iitBioDefault}{%	Fred J.\ Hickernell has served most of his career at Hong Kong Baptist	University (HKBU) (1985--2005) and Illinois Institute of Technology (Illinois Tech)	(2005--present). He was department head at HKBU for thirteen years,  department	chair at Illinois Tech for twelve years, and vice provost for research at Illinois Tech for six years. 	Prof.\ Hickernell’s research straddles computational mathematics and	statistics. He is a Fellow of the Institute of Mathematical Statistics and	has served on the editorial boards of the \emph{Journal of Complexity},	\emph{Mathematics of Computation}, and the \emph{SIAM Journal on Numerical		Analysis}. He has over 130 refereed publications and has supervised 14 PhDs.%}\newcommand{\iitBioContent}{\iitBioDefault}\newcommand{\bio}[1]{\renewcommand{\iitBioContent}{#1}}\newcommand{\setbiodefault}[1]{\renewcommand{\iitBioDefault}{#1}}\newcommand{\iitBioHeadingName}{Bio: }\makeatletter\providecommand{\iit@biofontcmd}{}%\AtBeginDocument{%	\ifx\iit@bioheading\@empty\else	\renewcommand{\iitBioHeadingName}{\iit@bioheading}%	\fi}\makeatother% Catcode-proof bio printer (no @-macros in the expansion)\newcommand{\printbio}{%	\begingroup	\expandafter\let\expandafter\maybeBioSize\csname iit@biofontcmd\endcsname	\par\bigskip	{\bfseries \iitBioHeadingName}%	{\maybeBioSize\noindent \iitBioContent\par}%	\endgroup}% Auto-append at end of *letter* so it can share the page\AtEndEnvironment{letter}{%	\ifbool{iit@autobio}{%		\par\vspace{5ex}		\printbio	}{}%}\defbibheading{letterbib}[\refname]{%	\par\bigskip	{\bfseries #1}\par\nobreak	\vspace{-0.5\baselineskip}}% --- Hyperref color setup (fixed, but user can \renewcommand) ----------------\providecommand\iitlinkcolor{violet}\providecommand\iitcitecolor{MidnightBlue}\providecommand\iiturlcolor{YellowOrange}\providecommand\myshade{70}% Define named base & mix colors early\AtBeginDocument{%	\colorlet{mylinkcolor}{\iitlinkcolor}%	\colorlet{mycitecolor}{\iitcitecolor}%	\colorlet{myurlcolor}{\iiturlcolor}%	\colorlet{linkcolormix}{mylinkcolor!\myshade!black}%	\colorlet{citecolormix}{mycitecolor!\myshade!black}%	\colorlet{urlcolormix}{myurlcolor!\myshade!black}%}% Ensure these win over any user/preamble settings\AtEndPreamble{%	\hypersetup{%		colorlinks = true,		linkcolor  = linkcolormix,		citecolor  = citecolormix,		urlcolor   = urlcolormix,		pdfborder  = {0 0 0}	}%}\AtEveryCite{%	\color{citecolormix}%}% Color the author names used in citations\DeclareNameWrapperFormat{labelname}{\textcolor{citecolormix}{#1}}% Color the label date (year) used in citations\DeclareFieldFormat{labeldate}{\textcolor{citecolormix}{#1}}% Color the parentheses that \parencite adds\DeclareDelimFormat{parencite:open}{\textcolor{citecolormix}{(}}\DeclareDelimFormat{parencite:close}{\textcolor{citecolormix}{)}}% Color the parentheses in \textcite (around the year)\DeclareDelimFormat{textcite:paren:open}{\textcolor{citecolormix}{(}}\DeclareDelimFormat{textcite:paren:close}{\textcolor{citecolormix}{)}}\endinput